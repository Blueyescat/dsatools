/*! dsabp-js v0.1.0 @license GPL-3.0 https://github.com/Blueyescat/dsabp-js */
var tt=class{};var at=class{int;constructor(t){if(t==null){this.int=0n;return}if(typeof t=="string")t="0b"+xt(t);else if(typeof t!="number"&&typeof t!="bigint")throw new TypeError("input must be a number, bigint or string");this.int=BigInt(t)}set(t){if(t<0||t>63)throw new RangeError("index must be between [0,63]");return this.int|=mt(t),this}clear(t){if(t<0||t>63)throw new RangeError("index must be between [0,63]");return this.int&=~mt(t),this}toggle(t,e){if(t<0||t>63)throw new RangeError("index must be between [0,63]");return typeof e>"u"?this.int^=mt(t):e===!0?this.set(t):e===!1&&this.clear(t),this}isSet(t){return t<0||t>63?!1:!!(this.int&mt(t))}isZero(){return this.int==0n}isOne(){return this.int==1n}trimLeadZeros(){return this.int&&(this.int/=-this.int&this.int),this}get size(){return this.int.toString(2).length}*[Symbol.iterator](){for(let t of xt(this.int.toString(2)))yield t=="1"}toArray(){return Array.from(this)}toString(){return xt(this.int.toString(2))}get[Symbol.toStringTag](){return this.toString()}equals(t){return this.int===t?.int}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}};function mt(r){return 1n<<BigInt(r)}function xt(r){return r.length<1?r:r.split("").reduce((t,e)=>e+t)}var ft="DSA:";var $=class extends tt{x;y;item;bits;shape;constructor(t){super();for(let e in this)Object.defineProperty(this,e,{configurable:!1});if(t!=null){if(Object.getPrototypeOf(t)!=Object.prototype)throw new TypeError("input must be an Object literal");this.set(t)}}set(t){return Object.assign(this,t)}fillFromArray(t){return this.x=t[1],this.y=t[2],this.item=t[3],this.bits=typeof t[4]<"u"?new at(t[4]):void 0,this.shape=t[5],this}toArray(){let t=[];return t[0]=0,this.x!==void 0&&(t[1]=this.x),this.y!==void 0&&(t[2]=this.y),this.item!==void 0&&(t[3]=this.item),this.bits!==void 0&&(t[4]=this.bits.int),this.shape!==void 0&&this.shape!=0&&(t[5]=this.shape,typeof t[4]>"u"&&(t[4]=1n)),t}clone(){let t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return this.bits&&(t.bits=this.bits.clone()),t}};var _t=(n=>(n[n.PUSH=0]="PUSH",n[n.PULL=1]="PULL",n[n.DO_NOTHING=2]="DO_NOTHING",n))(_t||{}),kt=(h=>(h[h.TOP_LEFT=0]="TOP_LEFT",h[h.TOP=1]="TOP",h[h.TOP_RIGHT=2]="TOP_RIGHT",h[h.LEFT=3]="LEFT",h[h.RIGHT=4]="RIGHT",h[h.BOTTOM_LEFT=5]="BOTTOM_LEFT",h[h.BOTTOM=6]="BOTTOM",h[h.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",h))(kt||{}),Ht=(n=>(n[n.LOW=0]="LOW",n[n.NORMAL=1]="NORMAL",n[n.HIGH=2]="HIGH",n))(Ht||{}),Wt=(i=>(i[i.ALLOW_ALL=0]="ALLOW_ALL",i[i.BLOCK_FILTER_ONLY=1]="BLOCK_FILTER_ONLY",i[i.ALLOW_FILTER_ONLY=2]="ALLOW_FILTER_ONLY",i[i.BLOCK_ALL=3]="BLOCK_ALL",i))(Wt||{}),Zt=(i=>(i[i.RIGHT=0]="RIGHT",i[i.UP=1]="UP",i[i.LEFT=2]="LEFT",i[i.DOWN=3]="DOWN",i))(Zt||{});var gt={filterMode:0,filterItems:[0,0,0],angle:0,fixedAngle:0,pusher:{defaultMode:2,filteredMode:0,angle:0,targetSpeed:20,filterByInventory:!1,maxBeamLength:1e3},loader:{pickupPoint:3,dropPoint:4,priority:1,stackLimit:16,cycleTime:20,requireOutputInventory:!1,waitForStackLimit:!1}},ht={filter_config:"filterMode",filter_items:"filterItems",angle:"angle",angle_fixed:"fixedAngle",config_pusher:"pusher",config_loader:"loader"};for(let r in ht)ht[ht[r]]=r;var z=class extends tt{static get defaults(){return gt}static set defaults(t){if(t!=null&&Object.getPrototypeOf(t)!=Object.prototype)throw new TypeError("defaults can only be set to an Object literal");gt=t}rawData;filterMode;filterItems;angle;fixedAngle;pusher={};loader={};constructor(t){super();for(let e in this)Object.defineProperty(this,e,{configurable:!1});if(t!=null){if(Object.getPrototypeOf(t)!=Object.prototype)throw new TypeError("input must be an Object literal");this.set(t)}}set(t){return Object.assign(this,t)}fillFromArray(t){if(t[1]==null)return this;if(t[1]instanceof Uint8Array)return this.rawData=t[1],this;t=t[1];for(let e=0;e<t.length;e++)if(!(e<=1)&&typeof t[e]=="string"&&t[e+1]===0){let n=t[e],i=t[e+2];Array.isArray(i)&&(i=ce(n,i)??i),this[ht[n]??n]=i,e+=2}return this}fillDataFromArray(t){let e=[];return e[0]=1,e[1]=t,this.fillFromArray(e)}toArray(){let t=[];if(t[0]=1,this.isRaw)return t[1]=this.rawData,t;t[1]=[0,0];for(let e of Object.keys(this)){let n=structuredClone(this[e]),i=ht[e]??e;if(n!==void 0){if(n===null||Object.getPrototypeOf(n)==Object.prototype){if(n!==null&&!Object.keys(n).length)continue;n=pe(i,n)}else Array.isArray(n)||(n=[n]);t[1].push(i,0,n)}}return t}get isRaw(){return this.rawData instanceof Uint8Array}equals(t){return Kt(this,t)}clone(){let t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return this.rawData&&(t.rawData=new Uint8Array(this.rawData)),t}};function Kt(r,t){if(r===t)return!0;if(r?.constructor!==t?.constructor)return!1;let e=Object.keys(r);return r&&t&&typeof r=="object"&&typeof t=="object"?e.length===Object.keys(t).length&&e.every(n=>Kt(r[n],t[n])):r===t}function ce(r,t){switch(r){case"filter_config":case"angle":case"angle_fixed":return t[0];case"filter_items":return t;case"config_loader":return{pickupPoint:t[0],dropPoint:t[1],priority:t[2],stackLimit:t[3],cycleTime:t[4],requireOutputInventory:t[5],waitForStackLimit:t[6]};case"config_pusher":return{defaultMode:t[0],filteredMode:t[1],angle:t[2],targetSpeed:t[3],filterByInventory:t[4],maxBeamLength:t[5]}}}function pe(r,t){let e=[];if(t!==null)for(let n in t)t[n]===null&&delete t[n];switch(r){case"config_loader":t={...gt.loader,...t},e[0]=t.pickupPoint,e[1]=t.dropPoint,e[2]=t.priority,e[3]=t.stackLimit,e[4]=t.cycleTime,e[5]=t.requireOutputInventory,e[6]=t.waitForStackLimit;break;case"config_pusher":{t={...gt.pusher,...t},e[0]=t.defaultMode,e[1]=t.filteredMode,e[2]=t.angle,e[3]=t.targetSpeed,e[4]=t.filterByInventory,e[5]=t.maxBeamLength;break}}return e}var Z=class{version;width;height;commands;constructor(t){for(let e in this)Object.defineProperty(this,e,{configurable:!1});if(typeof t>"u")this.version=0,this.width=1,this.height=1,this.commands=[];else if(t!=null&&Object.getPrototypeOf(t)==Object.prototype)if(this.version=t.version??0,this.width=t.width??1,this.height=t.height??1,t.commands!=null){if(!Array.isArray(t.commands))throw new TypeError("input.commands must be an array");this.commands=t.commands}else this.commands=[];else throw new TypeError("input must be an Object literal")}set(t){return Object.assign(this,t)}fillFromArray(t,e){return this.version=t[0],this.width=t[1],this.height=t[2],this.commands=e?t[3]:t[3].map(n=>{if(n[0]==0)return new $().fillFromArray(n);if(n[0]==1)return new z().fillFromArray(n)}),this}toArray(t){let e=[];return e[0]=this.version,e[1]=this.width,e[2]=this.height,e[3]=t?this.commands:this.commands.map(n=>n.toArray()),e}clone(){let t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return this.commands&&(t.commands=this.commands.map(e=>e.clone())),t}};var S=Uint8Array,F=Uint16Array,Mt=Int32Array,yt=new S([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wt=new S([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bt=new S([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xt=function(r,t){for(var e=new F(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var i=new Mt(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)i[s]=s-e[n]<<5|n;return{b:e,r:i}},Gt=Xt(yt,2),jt=Gt.b,Bt=Gt.r;jt[28]=258,Bt[258]=28;var Qt=Xt(wt,0),ve=Qt.b,Vt=Qt.r,Rt=new F(32768);for(c=0;c<32768;++c)X=(c&43690)>>1|(c&21845)<<1,X=(X&52428)>>2|(X&13107)<<2,X=(X&61680)>>4|(X&3855)<<4,Rt[c]=((X&65280)>>8|(X&255)<<8)>>1;var X,c,K=function(r,t,e){for(var n=r.length,i=0,s=new F(t);i<n;++i)r[i]&&++s[r[i]-1];var a=new F(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var p;if(e){p=new F(1<<t);var h=15-t;for(i=0;i<n;++i)if(r[i])for(var g=i<<4|r[i],o=t-r[i],f=a[r[i]-1]++<<o,w=f|(1<<o)-1;f<=w;++f)p[Rt[f]>>h]=g}else for(p=new F(n),i=0;i<n;++i)r[i]&&(p[i]=Rt[a[r[i]-1]++]>>15-r[i]);return p},J=new S(288);for(c=0;c<144;++c)J[c]=8;var c;for(c=144;c<256;++c)J[c]=9;var c;for(c=256;c<280;++c)J[c]=7;var c;for(c=280;c<288;++c)J[c]=8;var c,ct=new S(32);for(c=0;c<32;++c)ct[c]=5;var c,me=K(J,9,0),ge=K(J,9,1),ye=K(ct,5,0),we=K(ct,5,1),Dt=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},k=function(r,t,e){var n=t/8|0;return(r[n]|r[n+1]<<8)>>(t&7)&e},St=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},zt=function(r){return(r+7)/8|0},Jt=function(r,t,e){(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length);var n=new S(e-t);return n.set(r.subarray(t,e)),n};var de=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],j=function(r,t,e){var n=new Error(t||de[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,j),!e)throw n;return n},Oe=function(r,t,e,n){var i=r.length,s=n?n.length:0;if(!i||t.f&&!t.l)return e||new S(0);var a=!e||t.i!=2,p=t.i;e||(e=new S(i*3));var h=function(it){var st=e.length;if(it>st){var ot=new S(Math.max(st*2,it));ot.set(e),e=ot}},g=t.f||0,o=t.p||0,f=t.b||0,w=t.l,d=t.d,x=t.m,y=t.n,N=i*8;do{if(!w){g=k(r,o,1);var Y=k(r,o+1,3);if(o+=3,Y)if(Y==1)w=ge,d=we,x=9,y=5;else if(Y==2){var I=k(r,o,31)+257,R=k(r,o+10,15)+4,C=I+k(r,o+5,31)+1;o+=14;for(var l=new S(C),u=new S(19),v=0;v<R;++v)u[bt[v]]=k(r,o+v*3,7);o+=R*3;for(var V=Dt(u),b=(1<<V)-1,Q=K(u,V,1),v=0;v<C;){var L=Q[k(r,o,b)];o+=L&15;var O=L>>4;if(O<16)l[v++]=O;else{var A=0,B=0;for(O==16?(B=3+k(r,o,3),o+=2,A=l[v-1]):O==17?(B=3+k(r,o,7),o+=3):O==18&&(B=11+k(r,o,127),o+=7);B--;)l[v++]=A}}var E=l.subarray(0,I),m=l.subarray(I);x=Dt(E),y=Dt(m),w=K(E,x,1),d=K(m,y,1)}else j(1);else{var O=zt(o)+4,_=r[O-4]|r[O-3]<<8,U=O+_;if(U>i){p&&j(0);break}a&&h(f+_),e.set(r.subarray(O,U),f),t.b=f+=_,t.p=o=U*8,t.f=g;continue}if(o>N){p&&j(0);break}}a&&h(f+131072);for(var H=(1<<x)-1,nt=(1<<y)-1,M=o;;M=o){var A=w[St(r,o)&H],P=A>>4;if(o+=A&15,o>N){p&&j(0);break}if(A||j(2),P<256)e[f++]=P;else if(P==256){M=o,w=null;break}else{var q=P-254;if(P>264){var v=P-257,D=yt[v];q=k(r,o,(1<<D)-1)+jt[v],o+=D}var T=d[St(r,o)&nt],W=T>>4;T||j(3),o+=T&15;var m=ve[W];if(W>3){var D=wt[W];m+=St(r,o)&(1<<D)-1,o+=D}if(o>N){p&&j(0);break}a&&h(f+131072);var et=f+q;if(f<m){var rt=s-m,Et=Math.min(m,et);for(rt+f<0&&j(3);f<Et;++f)e[f]=n[rt+f]}for(;f<et;f+=4)e[f]=e[f-m],e[f+1]=e[f+1-m],e[f+2]=e[f+2-m],e[f+3]=e[f+3-m];f=et}}t.l=w,t.p=M,t.b=f,t.f=g,w&&(g=1,t.m=x,t.d=d,t.n=y)}while(!g);return f==e.length?e:Jt(e,0,f)},G=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8},ut=function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>8,r[n+2]|=e>>16},Ut=function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var i=e.length,s=e.slice();if(!i)return{t:ee,l:0};if(i==1){var a=new S(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(I,R){return I.f-R.f}),e.push({s:-1,f:25001});var p=e[0],h=e[1],g=0,o=1,f=2;for(e[0]={s:-1,f:p.f+h.f,l:p,r:h};o!=i-1;)p=e[e[g].f<e[f].f?g++:f++],h=e[g!=o&&e[g].f<e[f].f?g++:f++],e[o++]={s:-1,f:p.f+h.f,l:p,r:h};for(var w=s[0].s,n=1;n<i;++n)s[n].s>w&&(w=s[n].s);var d=new F(w+1),x=Lt(e[o-1],d,0);if(x>t){var n=0,y=0,N=x-t,Y=1<<N;for(s.sort(function(R,C){return d[C.s]-d[R.s]||R.f-C.f});n<i;++n){var O=s[n].s;if(d[O]>t)y+=Y-(1<<x-d[O]),d[O]=t;else break}for(y>>=N;y>0;){var _=s[n].s;d[_]<t?y-=1<<t-d[_]++-1:++n}for(;n>=0&&y;--n){var U=s[n].s;d[U]==t&&(--d[U],++y)}x=t}return{t:new S(d),l:x}},Lt=function(r,t,e){return r.s==-1?Math.max(Lt(r.l,t,e+1),Lt(r.r,t,e+1)):t[r.s]=e},qt=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new F(++t),n=0,i=r[0],s=1,a=function(h){e[n++]=h},p=1;p<=t;++p)if(r[p]==i&&p!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=r[p]}return{c:e.subarray(0,n),n:t}},lt=function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},te=function(r,t,e){var n=e.length,i=zt(t+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=e[s];return(i+4+n)*8},$t=function(r,t,e,n,i,s,a,p,h,g,o){G(t,o++,e),++i[256];for(var f=Ut(i,15),w=f.t,d=f.l,x=Ut(s,15),y=x.t,N=x.l,Y=qt(w),O=Y.c,_=Y.n,U=qt(y),I=U.c,R=U.n,C=new F(19),l=0;l<O.length;++l)++C[O[l]&31];for(var l=0;l<I.length;++l)++C[I[l]&31];for(var u=Ut(C,7),v=u.t,V=u.l,b=19;b>4&&!v[bt[b-1]];--b);var Q=g+5<<3,L=lt(i,J)+lt(s,ct)+a,A=lt(i,w)+lt(s,y)+a+14+3*b+lt(C,v)+2*C[16]+3*C[17]+7*C[18];if(h>=0&&Q<=L&&Q<=A)return te(t,o,r.subarray(h,h+g));var B,E,m,H;if(G(t,o,1+(A<L)),o+=2,A<L){B=K(w,d,0),E=w,m=K(y,N,0),H=y;var nt=K(v,V,0);G(t,o,_-257),G(t,o+5,R-1),G(t,o+10,b-4),o+=14;for(var l=0;l<b;++l)G(t,o+3*l,v[bt[l]]);o+=3*b;for(var M=[O,I],P=0;P<2;++P)for(var q=M[P],l=0;l<q.length;++l){var D=q[l]&31;G(t,o,nt[D]),o+=v[D],D>15&&(G(t,o,q[l]>>5&127),o+=q[l]>>12)}}else B=me,E=J,m=ye,H=ct;for(var l=0;l<p;++l){var T=n[l];if(T>255){var D=T>>18&31;ut(t,o,B[D+257]),o+=E[D+257],D>7&&(G(t,o,T>>23&31),o+=yt[D]);var W=T&31;ut(t,o,m[W]),o+=H[W],W>3&&(ut(t,o,T>>5&8191),o+=wt[W])}else ut(t,o,B[T]),o+=E[T]}return ut(t,o,B[256]),o+E[256]},Ee=new Mt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ee=new S(0),Te=function(r,t,e,n,i,s){var a=s.z||r.length,p=new S(n+a+5*(1+Math.ceil(a/7e3))+i),h=p.subarray(n,p.length-i),g=s.l,o=(s.r||0)&7;if(t){o&&(h[0]=s.r>>3);for(var f=Ee[t-1],w=f>>13,d=f&8191,x=(1<<e)-1,y=s.p||new F(32768),N=s.h||new F(x+1),Y=Math.ceil(e/3),O=2*Y,_=function(At){return(r[At]^r[At+1]<<Y^r[At+2]<<O)&x},U=new Mt(25e3),I=new F(288),R=new F(32),C=0,l=0,u=s.i||0,v=0,V=s.w||0,b=0;u+2<a;++u){var Q=_(u),L=u&32767,A=N[Q];if(y[L]=A,N[Q]=L,V<=u){var B=a-u;if((C>7e3||v>24576)&&(B>423||!g)){o=$t(r,h,0,U,I,R,l,v,b,u-b,o),v=C=l=0,b=u;for(var E=0;E<286;++E)I[E]=0;for(var E=0;E<30;++E)R[E]=0}var m=2,H=0,nt=d,M=L-A&32767;if(B>2&&Q==_(u-M))for(var P=Math.min(w,B)-1,q=Math.min(32767,u),D=Math.min(258,B);M<=q&&--nt&&L!=A;){if(r[u+m]==r[u+m-M]){for(var T=0;T<D&&r[u+T]==r[u+T-M];++T);if(T>m){if(m=T,H=M,T>P)break;for(var W=Math.min(M,T-2),et=0,E=0;E<W;++E){var rt=u-M+E&32767,Et=y[rt],it=rt-Et&32767;it>et&&(et=it,A=rt)}}}L=A,A=y[L],M+=L-A&32767}if(H){U[v++]=268435456|Bt[m]<<18|Vt[H];var st=Bt[m]&31,ot=Vt[H]&31;l+=yt[st]+wt[ot],++I[257+st],++R[ot],V=u+m,++C}else U[v++]=r[u],++I[r[u]]}}for(u=Math.max(u,V);u<a;++u)U[v++]=r[u],++I[r[u]];o=$t(r,h,g,U,I,R,l,v,b,u-b,o),g||(s.r=o&7|h[o/8|0]<<3,o-=7,s.h=N,s.p=y,s.i=u,s.w=V)}else{for(var u=s.w||0;u<a+g;u+=65535){var Tt=u+65535;Tt>=a&&(h[o/8|0]=g,Tt=a),o=te(h,o+1,r.subarray(u,Tt))}s.i=a}return Jt(p,0,n+zt(o)+i)};var Ae=function(r,t,e,n,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new S(s.length+r.length);a.set(s),a.set(r,s.length),r=a,i.w=s.length}return Te(r,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):12+t.mem,e,n,i)};function re(r,t){return Ae(r,t||{},0,0)}function ne(r,t){return Oe(r,{i:2},t&&t.out,t&&t.dictionary)}var xe=typeof TextDecoder<"u"&&new TextDecoder,Ce=0;try{xe.decode(ee,{stream:!0}),Ce=1}catch{}var ie=r=>Uint8Array.from(atob(r),t=>t.charCodeAt(0)),se=r=>btoa(String.fromCharCode.apply(null,r));function oe(){let r=async e=>{let n;self.addEventListener("message",async i=>{let s=i.data;for(;!n;)await new Promise(a=>setTimeout(a,0));if(s.cmd=="decode"){try{s.result=new n.Decoder().decodeSync(s.args.input,s.args.options).toArray()}catch(a){s.err=a}delete s.args,self.postMessage(s)}else if(s.cmd=="decodeConfigCmd"){try{s.result=new n.Decoder().decodeConfigCmdData(s.args.rawData)}catch(a){s.err=a}delete s.args,self.postMessage(s)}else if(s.cmd=="encode"){try{let a=new n.Blueprint().fillFromArray(s.args.input);s.result=new n.Encoder().encodeSync(a)}catch(a){s.err=a}delete s.args,self.postMessage(s)}}),e.bundleInfo.format=="iife"?(importScripts(e.path),n=globalThis[e.bundleInfo.globalName]):n=await import(e.path)},t={path:import.meta.url,bundleInfo:{format:"esm",globalName:"dsabp"}};return new Worker(URL.createObjectURL(new Blob([`(${r.toString()})(${JSON.stringify(t)})`],{type:"text/javascript;charset=utf-8"})))}var De={0:2,2:3,3:4,4:5},pt=class{#a;#n;#e;#t;#s;options;constructor(){this.#a=new TextDecoder("utf-8")}#l(t,e){this.#n=new Uint8Array(t),this.#e=new DataView(t.buffer),this.#t=0,this.#s=e??0}decodeSync(t,e={}){if(typeof t!="string")throw new TypeError("input must be a string");t.substring(0,ft.length).toUpperCase()==ft&&(t=t.substring(ft.length)),typeof e.ignoreConfigCmdData>"u"&&(e.ignoreConfigCmdData=!1),this.options=e;let n;if(typeof zlib_inflateRawSync<"u"){let i=Buffer.from(t,"base64");n=zlib_inflateRawSync(i)}else{let i=ie(t);n=ne(i)}return this.#l(n,0),new Z().fillFromArray(this.#o(),!0)}decodeConfigCmdSync(t){if(!(t instanceof z))throw new TypeError(`input must be a ${z.name}`);if(!t.isRaw)return t;let e=this.decodeConfigCmdData(t.rawData);return t.rawData=void 0,t.fillDataFromArray(e)}decodeConfigCmdData(t){return this.#l(t,4),this.#o()}#o(){for(;this.#t<this.#n.length;){let t=this.#n[this.#t++];if(t<=63)return t;if(t<=127)return t-128;switch(t){case 144:return this.#g();case 128:return this.#y();case 129:return this.#f();case 130:return this.#w();case 131:return this.#r();case 132:return this.#h();case 133:return this.#u();case 134:return this.#d();case 135:return this.#c();case 136:return this.#O();case 137:return this.#E();case 143:return null;case 141:return!0;case 142:return!1;case 148:return this.#T(this.#p(),1);case 149:return this.#T(this.#v(),2);case 150:return this.#T(this.#m(),4);case 138:return this.#i(this.#p(),1);case 139:return this.#i(this.#v(),2);case 140:return this.#i(this.#m(),4)}throw new Error(`unsupported byte: ${t} (0x${t.toString(16)})`)}}#g(){let t=[],e=this.#s;this.#s=De[e]??1;let n=this.#s;for(;this.#t<this.#n.length;){if(this.#n[this.#t]==145){if(this.#t++,this.#s=e,n==4){if(t[0]===0)return new $().fillFromArray(t);if(t[0]===1)return new z().fillFromArray(t)}return t}t.push(this.#o())}}#y(){let t=this.#e.getUint8(this.#t);return this.#t++,t}#f(){let t=this.#e.getUint16(this.#t,!0);return this.#t+=2,t}#w(){let t=this.#e.getUint32(this.#t,!0);return this.#t+=4,t}#r(){let t=this.#e.getBigUint64(this.#t,!0);return this.#t+=8,t}#h(){let t=this.#e.getInt8(this.#t);return this.#t++,t}#u(){let t=this.#e.getInt16(this.#t,!0);return this.#t+=2,t}#d(){let t=this.#e.getInt32(this.#t,!0);return this.#t+=4,t}#c(){let t=this.#e.getBigInt64(this.#t,!0);return this.#t+=8,t}#O(){let t=this.#e.getFloat32(this.#t,!0);return this.#t+=4,t}#E(){let t=this.#e.getFloat64(this.#t,!0);return this.#t+=8,t}#p(){return this.#e.getUint8(this.#t)}#v(){return this.#e.getUint16(this.#t,!0)}#m(){return this.#e.getUint32(this.#t,!0)}#i(t,e){let n=this.#t+e,i=this.#a.decode(this.#n.slice(n,n+t));return this.#t+=e+t,i}#T(t,e){let n=this.options.ignoreConfigCmdData!==!0&&this.#s==4,i=this.#t+e,s=this.#n.slice(i,i+t);return this.#t=i,n?this.#o():(this.#t+=t,s)}};var dt=class r{#a;#n;#e;#t;constructor(){this.#a=new TextEncoder}#s(t){this.#e=new DataView(new ArrayBuffer(t)),this.#n=new Uint8Array(this.#e.buffer),this.#t=0}encodeSync(t){if(!(t instanceof Z))throw new TypeError(`input must be an instance of ${Z.name}`);let e=t.commands.length?Math.max(t.commands.length*20,512):4096;this.#s(e),this.#o(t.toArray(!0));let n=this.#n.slice(0,this.#t);if(typeof zlib_deflateRawSync<"u")return zlib_deflateRawSync(n,{level:9}).toString("base64");{let i=re(n,{level:9});return se(i)}}#l(t){return this.#s(128),this.#o(t),this.#n.slice(0,this.#t)}#o(t){if(typeof t=="number"||typeof t=="bigint")this.#g(t);else if(typeof t=="boolean")this.#r(t?141:142);else if(typeof t=="string")this.#y(t);else if(t==null)this.#r(143);else if(Array.isArray(t))this.#f(t);else if(t instanceof Uint8Array)this.#w(t);else if(t instanceof $)this.#f(t.toArray());else if(t instanceof z){let e=t.toArray();Array.isArray(e[1])&&(e[1]=new Uint8Array(new r().#l(e[1]))),this.#f(e)}else throw new Error(`unsupported object: ${t.constructor?.name} ${t}`)}#g(t,e){let n=typeof t=="bigint";if(n&&t<=4294967295&&(t=Number(t),n=!1),!Number.isSafeInteger(t)&&!n){this.#r(136),this.#v(t);return}if(t>=-64&&t<=-1)return this.#c(64|t&127);if(t>=0&&t<=63)return this.#c(t);t<0||e?-128<=t&&t<=127?(this.#r(132),this.#r(t)):-32768<=t&&t<=32767?(this.#r(133),this.#O(t)):-2147483648<=t&&t<=2147483647?(this.#r(134),this.#E(t)):(this.#r(135),this.#p(BigInt(t))):t<=255?(this.#r(128),this.#r(t)):t<=65535?(this.#r(129),this.#h(t)):t<=4294967295?(this.#r(130),this.#u(t)):(this.#r(131),this.#d(BigInt(t)))}#y(t){let e=this.#a.encode(t),n=e.byteLength;n<=255?(this.#r(138),this.#r(n)):n<=65535?(this.#r(139),this.#h(n)):n<=4294967295&&(this.#r(140),this.#u(n)),this.#i(n),this.#n.set(e,this.#t),this.#t+=n}#f(t){this.#r(144);for(let e of t)this.#o(e);this.#r(145)}#w(t){let e=t.byteLength;e<=255?(this.#r(148),this.#r(e)):e<=65535?(this.#r(149),this.#h(e)):e<=4294967295&&(this.#r(150),this.#u(e)),this.#m(t)}#r(t){this.#i(1),this.#e.setUint8(this.#t,t),this.#t++}#h(t){this.#i(2),this.#e.setUint16(this.#t,t,!0),this.#t+=2}#u(t){this.#i(4),this.#e.setUint32(this.#t,t,!0),this.#t+=4}#d(t){this.#i(8),this.#e.setBigUint64(this.#t,t,!0),this.#t+=8}#c(t){this.#i(1),this.#e.setInt8(this.#t,t),this.#t++}#O(t){this.#i(2),this.#e.setInt16(this.#t,t,!0),this.#t+=2}#E(t){this.#i(4),this.#e.setInt32(this.#t,t,!0),this.#t+=4}#p(t){this.#i(8),this.#e.setBigInt64(this.#t,t,!0),this.#t+=8}#v(t){this.#i(4),this.#e.setFloat32(this.#t,t,!0),this.#t+=4}#m(t){this.#i(t.length),this.#n.set(t,this.#t),this.#t+=t.length}#i(t){let e=this.#t+t;if(e<=this.#e.byteLength)return;let n=new ArrayBuffer(Math.max(e,this.#e.byteLength+128)),i=new Uint8Array(n),s=new DataView(n);i.set(this.#n),this.#e=s,this.#n=i}};var Ft=globalThis.process?.release?.name=="node",fe=Ft?!isMainThread:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Nt=0,Ot={},vt=fe?null:(Ft?node_createWorker:oe)();function ae(r){r.err?Ot[r.id].rej(r.err):Ot[r.id].res(r.result),delete Ot[r.id]}fe||(Ft?vt.on("message",ae):vt.addEventListener("message",r=>ae(r.data)));function Pt(r){return new Promise((t,e)=>Ot[r]={res:t,rej:e})}async function he(r,t){let e=Nt++;return vt.postMessage({id:e,cmd:"decode",args:{input:r,options:t}}),new Z().fillFromArray(await Pt(e))}function ue(r){let t=Nt++;return vt.postMessage({id:t,cmd:"decodeConfigCmd",args:{rawData:r}}),Pt(t)}function le(r){let t=Nt++;return vt.postMessage({id:t,cmd:"encode",args:{input:r.toArray()}}),Pt(t)}function Or(r,t){return new pt().decodeSync(r,t)}async function Er(r,t){return he(r,t)}function Tr(r){return new pt().decodeConfigCmdSync(r)}async function Ar(r){if(!(r instanceof z))throw new TypeError(`input must be a ${z.name}`);if(!r.isRaw)return r;let t=await ue(r.rawData);return r.rawData=void 0,r.fillDataFromArray(t)}function xr(r){return new dt().encodeSync(r)}function Cr(r){return le(r)}export{tt as BPCmd,Z as Blueprint,at as BuildBits,$ as BuildCmd,z as ConfigCmd,pt as Decoder,dt as Encoder,Wt as FilterMode,Zt as FixedAngle,kt as LoaderPoint,Ht as LoaderPriority,ft as PREFIX,_t as PusherMode,Er as decode,Ar as decodeConfigCmd,Tr as decodeConfigCmdSync,Or as decodeSync,Cr as encode,xr as encodeSync};
//# sourceMappingURL=index.min.js.map
